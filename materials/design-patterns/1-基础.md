# 设计模式

1. 需求指导设计(技术方案)，设计指导开发。

2. 前端常见设计模式

- 工厂模式；

使用场景：

- jQuery $函数
- Vue \_createElementVNode
- React createElement

- 单例模式；

使用场景：

- 登录框
- Vuex store

- 观察者模式；

使用场景：

- DOM 事件
- React Vue 组件生命周期
- Vue watch
- Vue 组件更新过程
- MutationObserver
- 自定义事件 EventBus
- postMessage

- 迭代器模式；

使用场景：

- Symbol.iterator
- for...of
- Generator 和 yield

- 原型模式；

使用场景：

- JS 原型与原型链
- Object.create
- 对象属性描述符

- 装饰器模式；

使用场景：

- decorator 语法
- AOP 面向切片编程

- 代理模式；

使用场景：

- DOM 事件代理
- proxy 和 reflect
- nginx 反向代理
- webpack DevServer

- 其它

## 面向对象(OOP - Object Oriented Program)

1. 面向对象三要素

继承：抽离公共代码，实现代码的复用

封装：高内聚，低耦合

多态：更好的扩展性

## UML 类图

1. 动手画 UML 类图，**别眼高手低。**

2. UML 是一个非常规范的、标准的图形表达方式。

### 类之间的关系

1. 实现 - 实现接口

1.1 注意要使用虚线空心箭头。

2. 泛化 - 继承父类

2.1 使用实线空心箭头。

3. 关联 - A 是 B 的属性

3.1 使用正箭头

#### 实现

1. 类实现接口使用关键字：implements

#### 关联分类

1. 聚合 - 整体包含部分，部分可以脱离整体而单独存在。

注意：

- 连线 - 左端为菱形空心箭头，右端为正箭头

2. 组合 - 整体包含部分，部分不可以脱离整体。

注意：

- 连线 - 左端为菱形实心箭头，右端为正箭头

3. 依赖 - 不是属性关系，而是函数参数或返回值。

注意：

- 连线 - 虚线箭头。

## 设计原则：先设计，后模式

### SOLID 五大设计原则

#### S - 单一职责原则

1. 理解

- 每个程序做好一件事；
- 管理好每个程序的粒度，合理地拆分；
- 每个部分保持相互独立

#### O - 开放封闭原则

1. 理解

- 对扩展开放；
- 对修改封闭；
- **切记：当需求发生变化时，通过扩展来解决，而不是改变原代码。**

#### L - 里氏替换原则

1. 理解

- 子类能覆盖父类；
- 父类出现的地方，子类也能出现。

**前端应用地较少。**

#### I - 接口隔离原则

1. 理解

- 保持接口的单一独立；
- 避免出现”胖接口“

类比思考「单一职责原则」。

#### D - 依赖倒置原则

1. 理解

面向接口编程，依赖接口和抽象，而非面向实例。

示例：

```ts
function fn(p: Person) {} // 依赖具体的类
function fn(p: IPerson) {} // 依赖接口
```

### Unix/Linux 设计哲学

### 23 种设计模式

### 前端常用的设计模式

### 要点

1. 认同设计的价值。

2. 分开理解“设计”和“模式”，即：从设计 -> 模式。

- 设计：指的是设计原则；
- 模式：依据设计原则实践总结出来的一套方法。

3. 真正理解「开放封闭原则」。

4. 对前端工程师来说，建议熟练掌握常见的设计模式即可。
